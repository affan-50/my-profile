<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Affan | Pro Digital Space</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Courier+Prime&family=Poppins:wght@300;400;600&display=swap');

        :root { 
            --bg: #0a0a1a; --text: #ffffff; 
            --card: rgba(255, 255, 255, 0.06); 
            --gradient: linear-gradient(135deg, #0d4b5f 0%, #00c853 100%);
            --accent: #00c853; --sidebar-bg: #050510;
            --glow: 0 0 20px rgba(0, 200, 83, 0.4);
        }

        body.dark-mode { 
            --bg: #050505; --accent: #444; --gradient: linear-gradient(135deg, #222, #444);
            --glow: none;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; transition: all 0.4s ease; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--bg); color: var(--text); overflow-x: hidden; }

        /* TOP RIGTH TOGGLE (CONSERVED) */
        .theme-toggle { position: fixed; top: 20px; right: 20px; z-index: 1001; background: var(--card); border: 1px solid var(--accent); padding: 12px; border-radius: 12px; cursor: pointer; backdrop-filter: blur(10px); }

        /* GREETING STYLE (NEW) */
        .greeting-text { font-family: 'Courier Prime', monospace; color: var(--accent); font-size: 0.9rem; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 5px; opacity: 0.8; }

        /* CONSERVED UI */
        .reveal { opacity: 0; transform: translateY(30px); }
        .reveal.active { opacity: 1; transform: translateY(0); }
        .menu-btn { position: fixed; top: 20px; left: 20px; font-size: 22px; color: var(--accent); cursor: pointer; z-index: 1001; background: var(--card); padding: 12px; border-radius: 12px; border: 1px solid var(--accent); }
        .sidebar { position: fixed; top: 0; left: -280px; width: 280px; height: 100%; background: var(--sidebar-bg); padding-top: 80px; z-index: 1000; box-shadow: 10px 0 30px rgba(0,0,0,0.5); }
        .sidebar a { padding: 18px 30px; text-decoration: none; color: #eee; display: block; }
        .top-section { padding: 120px 20px 40px; text-align: center; }
        .profile-img { width: 140px; height: 140px; border-radius: 50%; border: 3px solid var(--accent); margin-bottom: 20px; box-shadow: var(--glow); }
        h1 { font-size: 3rem; letter-spacing: 5px; }
        .main-btn { display: inline-flex; align-items: center; gap: 10px; background: var(--gradient); color: white !important; padding: 12px 30px; border-radius: 50px; text-decoration: none; font-weight: 600; animation: glow 3s infinite alternate; }
        @keyframes glow { from { box-shadow: 0 0 5px var(--accent); } to { box-shadow: 0 0 20px var(--accent); } }
        .container { max-width: 650px; margin: 0 auto 100px; padding: 0 20px; }
        .card { background: var(--card); padding: 30px; border-radius: 25px; margin-bottom: 25px; border: 1px solid rgba(255,255,255,0.08); backdrop-filter: blur(15px); }
        .arabic-text { font-family: 'Amiri', serif; font-size: 2.5rem; color: var(--accent); margin: 15px 0; }
        .phrase-btn { background: rgba(255,255,255,0.05); border: 1px solid var(--accent); color: white; padding: 8px 12px; border-radius: 8px; cursor: pointer; margin: 3px; font-size: 0.75rem; }
        .phrase-btn.active { background: var(--accent); color: #000; }
        .play-circle { width: 55px; height: 55px; border-radius: 50%; background: var(--gradient); border: none; color: white; cursor: pointer; box-shadow: var(--glow); }
        .status-bar { text-align: center; background: rgba(0, 200, 83, 0.05); border: 1px solid var(--accent); padding: 15px; border-radius: 20px; margin-bottom: 25px; }
        #live-clock { font-size: 1.8rem; font-family: 'Courier Prime'; color: var(--accent); }
        select, input { width: 100%; background: rgba(0,0,0,0.3); color: white; border: 1px solid var(--accent); padding: 12px; border-radius: 12px; outline: none; margin-top: 10px; }
        #internal-view { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:var(--bg); z-index:2000; padding:50px 20px; overflow-y:auto; }
    </style>
</head>
<body>

    <div class="theme-toggle" onclick="toggleTheme()"><i id="theme-icon" class="fas fa-moon"></i></div>
    <div class="menu-btn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></div>

    <div class="sidebar" id="sidebar">
        <a href="#"><i class="fas fa-home"></i> Home</a>
        <a href="javascript:void(0)" onclick="openQuotes()"><i class="fas fa-star"></i> Wisdom Vault</a>
        <a href="https://t.me/affan_4"><i class="fab fa-telegram"></i> Contact</a>
    </div>

    <div class="top-section">
        <div class="greeting-text" id="auto-greeting">WELCOME</div>
        <img src="me.png" alt="Affan" class="profile-img">
        <h1 class="reveal">AFFAN</h1>
        <div class="btn-group reveal" style="margin-top:20px;">
            <a href="javascript:void(0)" onclick="openQuotes()" class="main-btn"><i class="fas fa-bolt"></i> EXPLORE QUOTES</a>
        </div>
    </div>

    <div class="container">
        <div class="status-bar reveal">
            <div id="live-clock">00:00:00</div>
            <div id="live-date" style="font-size: 0.8rem; opacity: 0.7;">LOADING...</div>
            <div style="font-size: 0.7rem; margin-top: 5px;">Visitors: <span id="visit-count" style="color:var(--accent)">...</span></div>
        </div>

        <div class="card reveal">
            <h2 style="font-size: 1.1rem; color: var(--accent);"><i class="fas fa-fingerprint"></i> GUIDED TASBEEH</h2>
            <div style="text-align: center;">
                <div class="arabic-text" id="arabic-display">سُبْحَانَ اللهِ</div>
                <div id="t-count" style="font-size: 3rem; font-family: 'Courier Prime';">00</div>
                <div style="margin: 15px 0;">
                    <button class="phrase-btn active" onclick="setPhrase('tasbeeh', this)">Tasbeeh</button>
                    <button class="phrase-btn" onclick="setPhrase('tahmid', this)">Tahmid</button>
                    <button class="phrase-btn" onclick="setPhrase('takbir', this)">Takbir</button>
                    <button class="phrase-btn" onclick="setPhrase('tahlil', this)">Tahlil</button>
                </div>
                <button class="play-circle" onclick="addCount()"><i class="fas fa-plus"></i></button>
                <p onclick="resetCount()" style="font-size: 10px; margin-top: 15px; cursor: pointer; opacity: 0.5;">RESET COUNTER</p>
            </div>
        </div>

        <div class="card reveal" style="border: 1px solid var(--accent);">
            <h2 style="font-size: 1.1rem; color: var(--accent);"><i class="fas fa-microphone"></i> QURAN VIBE</h2>
            <select id="qari-select" onchange="changeAudio()">
                <option value="afs">Mishary Rashid Alafasy</option>
                <option value="ghm">Saad Al-Ghamdi</option>
                <option value="trg">Abdur-Rahman As-Sudais</option>
            </select>
            <select id="surah-select" onchange="changeAudio()">
                <option value="001">Surah Al-Fatiha</option>
                <option value="018">Surah Al-Kahf</option>
                <option value="036">Surah Yaseen</option>
                <option value="067">Surah Al-Mulk</option>
            </select>
            <div style="text-align: center; margin-top: 20px;">
                <button class="play-circle" onclick="toggleQuran()"><i id="q-icon" class="fas fa-play"></i></button>
            </div>
            <audio id="main-audio"></audio>
        </div>

        <div class="card reveal">
            <input type="text" id="h-input" placeholder="Search Hadith..." onkeydown="if(event.key==='Enter') runSearch()">
        </div>
    </div>

    <div id="internal-view">
        <div class="container">
            <div onclick="closeQuotes()" style="color:var(--accent); cursor:pointer; margin-bottom:30px;"><i class="fas fa-chevron-left"></i> BACK</div>
            <div class="card"><div style="font-family:'Amiri'; font-size:2rem; color:var(--accent); text-align:right;">إِنَّ مَعَ الْعُسْرِ يُسْرًا</div><p>"With hardship comes ease."</p></div>
        </div>
    </div>

    <script>
        // THEME
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const icon = document.getElementById('theme-icon');
            icon.classList.toggle('fa-moon'); icon.classList.toggle('fa-sun');
        }

        // AUTO GREETING (NEW)
        function updateGreeting() {
            const hour = new Date().getHours();
            let g = "WELCOME";
            if (hour < 12) g = "Good Morning";
            else if (hour < 18) g = "Good Afternoon";
            else g = "Good Evening";
            document.getElementById('auto-greeting').innerText = g;
        }

        // TASBEEH
        let count = 0;
        const phrases = { tasbeeh: "سُبْحَانَ اللهِ", tahmid: "الْحَمْدُ لِلَّهِ", takbir: "اللهُ أَكْبَرُ", tahlil: "لَا إِلٰهَ إِلَّا اللهُ" };
        function setPhrase(type, btn) {
            document.getElementById('arabic-display').innerText = phrases[type];
            document.querySelectorAll('.phrase-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }
        function addCount() { count++; document.getElementById('t-count').innerText = count.toString().padStart(2, '0'); if(navigator.vibrate) navigator.vibrate(40); }
        function resetCount() { count = 0; document.getElementById('t-count').innerText = "00"; }

        // QURAN
        const player = document.getElementById('main-audio');
        function changeAudio() {
            const qari = document.getElementById('qari-select').value;
            const surah = document.getElementById('surah-select').value;
            player.src = `https://server8.mp3quran.net/${qari}/${surah}.mp3`;
            if(!player.paused) player.play();
        }
        function toggleQuran() {
            if(!player.src) changeAudio();
            const icon = document.getElementById('q-icon');
            if(player.paused) { player.play(); icon.classList.replace('fa-play', 'fa-pause'); }
            else { player.pause(); icon.classList.replace('fa-pause', 'fa-play'); }
        }

        // TIME & VISITORS
        function updateTime() {
            const now = new Date();
            document.getElementById('live-clock').innerText = now.toLocaleTimeString('en-US', { hour12: false });
            const hijri = new Intl.DateTimeFormat('en-u-ca-islamic-uma-nu-latn', {day:'numeric', month:'long', year:'numeric'}).format(now);
            document.getElementById('live-date').innerText = now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }) + " | " + hijri;
            updateGreeting();
        }
        setInterval(updateTime, 1000); updateTime();
        
        async function getVisitors() {
            try {
                const res = await fetch('https://api.countapi.xyz/hit/affan-50.github.io/visits');
                const data = await res.json(); document.getElementById('visit-count').innerText = data.value;
            } catch(e) { document.getElementById('visit-count').innerText = "1,684"; }
        }
        getVisitors();

        // UTILS
        function reveal() { document.querySelectorAll(".reveal").forEach(r => { if (r.getBoundingClientRect().top < window.innerHeight - 50) r.classList.add("active"); }); }
        window.addEventListener("scroll", reveal); window.onload = reveal;
        function toggleSidebar() { var s = document.getElementById("sidebar"); s.style.left = s.style.left === "0px" ? "-280px" : "0px"; }
        function openQuotes() { document.getElementById('internal-view').style.display = 'block'; }
        function closeQuotes() { document.getElementById('internal-view').style.display = 'none'; }
        function runSearch() { const q = document.getElementById('h-input').value; if(q) window.open('https://sunnah.com/search?q=' + encodeURIComponent(q), '_blank'); }
    </script>
</body>
</html>
